<app-comic-detail-content
  [comic]="(comic$ | async)!"
  (actionEvent)="getContentAction($event)"
></app-comic-detail-content>

<ng-template #bottomSheet>
  <mat-nav-list *ngIf="comic$ | async as comic; else noComic">
    <a
      [routerLink]="['/home', 'comics', comic?.metadata?.urlSegment, 'edit']"
      mat-list-item
      (click)="closeBottomSheet()"
    >
      <span>Edit comic</span>
    </a>

    <a
      *ngIf="comic.readers?.length; else noReaderSites"
      [routerLink]="[
        '/home',
        'comics',
        comic?.metadata?.urlSegment,
        'readers',
        'edit'
      ]"
      mat-list-item
      (click)="closeBottomSheet()"
    >
      <span>Edit readers</span>
    </a>
    <ng-template #noReaderSites>
      <a
        [routerLink]="[
          '/home',
          'comics',
          comic?.metadata?.urlSegment,
          'add-readers'
        ]"
        mat-list-item
        (click)="closeBottomSheet()"
      >
        <span>Add readers</span>
      </a>
    </ng-template>

    <a
      *ngIf="comic.notes"
      [routerLink]="['/home', 'comics', comic?.metadata?.urlSegment, 'notes']"
      mat-list-item
      (click)="closeBottomSheet()"
    >
      <span>Edit notes</span>
    </a>

    <mat-list-item (click)="deleteComic(comic.metadata.id)">
      <span>Delete comic</span>
    </mat-list-item>
  </mat-nav-list>
  <ng-template #noComic>
    <mat-list-item (click)="closeBottomSheet()">
      <span>Close</span>
    </mat-list-item>
  </ng-template>
</ng-template>
